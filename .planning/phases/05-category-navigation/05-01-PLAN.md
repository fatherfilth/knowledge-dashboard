---
phase: 05-category-navigation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ui/ArticleCard.tsx
  - src/app/[category]/page.tsx
autonomous: true

must_haves:
  truths:
    - "Homepage displays a grid of all 6 categories with article counts"
    - "User can click a category to see all articles in that category"
    - "Article cards show title, status badge, date, tags, and content preview"
    - "User can click an article card to open the full reader view"
    - "Category pages sort articles by updated date (most recent first)"
  artifacts:
    - path: "src/components/ui/ArticleCard.tsx"
      provides: "Reusable card component for article listings"
      exports: ["ArticleCard"]
    - path: "src/app/[category]/page.tsx"
      provides: "Category page with card grid and date sorting"
      contains: "ArticleCard"
  key_links:
    - from: "src/app/[category]/page.tsx"
      to: "src/components/ui/ArticleCard.tsx"
      via: "import and render in grid"
      pattern: "import.*ArticleCard"
    - from: "src/components/ui/ArticleCard.tsx"
      to: "src/components/ui/StatusBadge.tsx"
      via: "import and render status"
      pattern: "import.*StatusBadge"
    - from: "src/components/ui/ArticleCard.tsx"
      to: "/[category]/[slug]"
      via: "Next.js Link component"
      pattern: "href=.*article\\.category.*article\\.slug"
    - from: "src/app/[category]/page.tsx"
      to: "src/lib/content.ts"
      via: "fetchCategoryArticles data fetch"
      pattern: "fetchCategoryArticles"
---

<objective>
Create article card component and upgrade category pages from simple link lists to rich card grids sorted by updated date.

Purpose: Users can browse articles within each category through visually rich cards showing title, status badge, updated date, tags (limited to 3), and a content preview — then click through to the full reader view.

Output: ArticleCard component and updated category page with responsive grid layout.
</objective>

<execution_context>
@C:/Users/Karl/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Karl/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-category-navigation/05-RESEARCH.md
@src/components/ui/StatusBadge.tsx
@src/types/content.ts
@src/lib/schemas/article.ts
@src/app/[category]/page.tsx
@src/app/[category]/[slug]/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ArticleCard component</name>
  <files>src/components/ui/ArticleCard.tsx</files>
  <action>
Create a new ArticleCard component at src/components/ui/ArticleCard.tsx that renders an article as a clickable card with rich metadata.

The component accepts a single prop: `article: Article` (from @/types/content).

Structure the card as follows:
1. Wrapper: `<article>` element with `relative rounded-lg border border-gray-200 p-6 transition hover:border-gray-300 hover:bg-gray-50` classes.
2. Title: `<h2>` with `mb-2 text-lg font-semibold text-gray-900`. Inside the h2, wrap the title text in a Next.js `<Link>` pointing to `/${article.category}/${article.slug}` with class `after:absolute after:inset-0` to make the entire card clickable via CSS pseudo-element (accessible pattern — screen readers only read the link text, not the whole card).
3. Metadata row: A `<div>` with `mb-3 flex items-center gap-3` containing:
   - `<StatusBadge status={article.status} />` (import from ./StatusBadge)
   - `<time>` element with `dateTime={article.updated.toISOString()}` and class `text-sm text-gray-500`, displaying `article.updated.toLocaleDateString()`
4. Tags: If `article.tags` exists and has length > 0, render a `<div>` with `mb-3 flex flex-wrap gap-2` containing:
   - First 3 tags as `<span>` with `rounded-full bg-gray-100 px-2 py-1 text-xs text-gray-600`
   - If more than 3 tags, show `<span className="text-xs text-gray-400">+{article.tags.length - 3} more</span>`
5. Content preview: `<p>` with `line-clamp-2 text-sm text-gray-600` containing `article.content?.trim() ? article.content.slice(0, 300) : "No preview available"`. Use 300-char slice to give line-clamp enough text to work with; line-clamp-2 handles visual truncation with ellipsis.

Import types: `Article` from @/types/content, `StatusBadge` from ./StatusBadge, `Link` from next/link.
Export as named export: `export function ArticleCard`.
  </action>
  <verify>Run `npx tsc --noEmit` — no type errors in ArticleCard.tsx.</verify>
  <done>ArticleCard component exists, accepts Article prop, renders title link with pseudo-element expansion, StatusBadge, date, limited tags with "+N more", and line-clamped content preview.</done>
</task>

<task type="auto">
  <name>Task 2: Upgrade category page to card grid with sorting</name>
  <files>src/app/[category]/page.tsx</files>
  <action>
Replace the current simple link list in src/app/[category]/page.tsx with a responsive card grid using ArticleCard, sorted by updated date.

Changes to make:
1. Add import: `import { ArticleCard } from "@/components/ui/ArticleCard";`
2. In the default export function, after fetching articles with `fetchCategoryArticles(category)`, sort them by updated date descending: `const sortedArticles = [...articles].sort((a, b) => b.updated.getTime() - a.updated.getTime());` — use spread to clone before sorting to avoid mutating cached data.
3. Replace the `<div className="space-y-4">` list block with a responsive grid: `<div className="grid grid-cols-1 gap-4 md:grid-cols-2 md:gap-6">` and map over `sortedArticles` rendering `<ArticleCard key={article.slug} article={article} />` for each.
4. Update the container max-width from `max-w-4xl` to `max-w-5xl` to accommodate the 2-column card grid.
5. Update the article count text to use `sortedArticles.length` instead of `articles.length`.
6. Keep everything else unchanged: generateStaticParams, generateMetadata, dynamicParams=false, the "Back to Home" link, the category header.

Do NOT change: the existing imports for Link, CATEGORIES, fetchCategoryArticles. Do NOT change generateStaticParams or generateMetadata functions. Do NOT change dynamicParams setting.
  </action>
  <verify>Run `npm run build` — build succeeds with all category pages generated statically. Verify no TypeScript errors with `npx tsc --noEmit`.</verify>
  <done>Category pages display articles as a responsive 2-column card grid (1 column on mobile), sorted by most recently updated first. Each card shows title, status badge, date, tags, and content preview. Clicking a card navigates to the article reader.</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes with zero errors
2. `npm run build` succeeds — all category and article routes generated statically
3. ArticleCard.tsx exists and exports ArticleCard component
4. Category page imports and uses ArticleCard in a grid layout
5. Articles are sorted by updated date (most recent first)
6. Cards show: title (clickable), StatusBadge, updated date, tags (max 3 + overflow), content preview (line-clamped)
</verification>

<success_criteria>
- Article cards display title, color-coded status badge, updated date, tags (limited to 3 with "+N more"), and line-clamped content preview
- Entire card is clickable and navigates to the article reader view
- Category pages show articles sorted by most recently updated first
- Responsive grid: 1 column on mobile, 2 columns on md+ screens
- Build completes successfully with all routes statically generated
</success_criteria>

<output>
After completion, create `.planning/phases/05-category-navigation/05-01-SUMMARY.md`
</output>
